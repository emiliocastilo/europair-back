databaseChangeLog:
  - changeSet:
      id: 02092020_flights_v1_table
      context: dev or pre or pro
      author: jose.mendezgonzalez
      comment: "Add flights table to the database"
      changes:
        # Flights
        - createTable:
            tableName: flights
            remarks: The flights
            columns:
              - column:
                  name: id
                  type: int
                  remarks: id of the flight
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: flights_id_pk
              - column:
                  name: departure_time
                  type: timestamp
                  remarks: departure time
                  constraints:
                    nullable: false
              - column:
                  name: time_zone
                  type: varchar(50)
                  remarks: flight departure time zone
              - column:
                  name: origin
                  type: varchar(3)
                  remarks: flight origin airport
                  constraints:
                    nullable: false
              - column:
                  name: destination
                  type: varchar(3)
                  remarks: flight destination airport
                  constraints:
                    nullable: false
              - column:
                  name: seats_F
                  type: int
                  remarks: F-type seats
                  constraints:
                    nullable: true
              - column:
                  name: seats_C
                  type: int
                  remarks: C-type seats
                  constraints:
                    nullable: true
              - column:
                  name: seats_Y
                  type: int
                  remarks: Y-type seats
                  constraints:
                    nullable: true
              - column:
                  name: beds
                  type: int
                  remarks: beds
                  constraints:
                    nullable: true
              - column:
                  name: stretchers
                  type: int
                  remarks: stretchers
                  constraints:
                    nullable: true
              - column:
                  name: created_at
                  type: timestamp
                  remarks: creation timestamp
                  constraints:
                    nullable: false
              - column:
                  name: created_by
                  type: varchar(30)
                  remarks: creation author
                  constraints:
                    nullable: false
              - column:
                  name: modified_at
                  type: timestamp
                  remarks: last modification timestamp
                  constraints:
                    nullable: true
              - column:
                  name: modified_by
                  type: varchar(30)
                  remarks: last modification author
                  constraints:
                    nullable: true
              - column:
                  name: route_id
                  type: int
                  remarks: route id
                  constraints:
                    nullable: false
                    foreignKeyName: flights_route_fk
                    references: routes(id)
        - addAutoIncrement:
            columnDataType: int
            columnName: id
            generationType: ALWAYS
            incrementBy: 1
            startWith: 1
            tableName: flights

  - changeSet:
      id: 02092020_flights_v1_20200921_positional_flight
      context: dev or pre or pro
      author: axel.sanchezsalom
      comment: "Add positional flight flag column"
      changes:
        - addColumn:
            tableName: flights
            columns:
              - column:
                  name: positional_flight
                  type: bool
                  remarks: Flag to identify positional flights

  - changeSet:
      id: 20201014_flights_v1_update_columns
      context: dev or pre or pro
      author: axel.sanchezsalom
      comment: "Add columns"
      changes:
        - dropColumn:
            tableName: flights
            columns:
              - column:
                  name: origin
                  type: varchar(3)
              - column:
                  name: destination
                  type: varchar(3)
        - addColumn:
            tableName: flights
            columns:
              - column:
                  name: arrival_time
                  type: timestamp
              - column:
                  name: origin_id
                  type: int
                  remarks: origin airport id
                  constraints:
                    nullable: false
                    foreignKeyName: flight_origin_airport_fk
                    references: airports(id)
              - column:
                  name: destination_id
                  type: int
                  remarks: destination airport id
                  constraints:
                    nullable: false
                    foreignKeyName: flight_destination_airport_fk
                    references: airports(id)
              - column:
                  name: flight_order
                  type: int

  - changeSet:
      id: 20201023_flights_v1_add_columns
      context: dev or pre or pro
      author: axel.sanchezsalom
      comment: "Add new columns"
      changes:
        - addColumn:
            tableName: flights
            columns:
              - column:
                  name: flight_number
                  type: varchar(50)
              - column:
                  name: slot
                  type: varchar(50)
              - column:
                  name: parking
                  type: varchar(50)

