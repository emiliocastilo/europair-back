databaseChangeLog:
  - changeSet:
      id: 04082020_aircraft_master_v1_aircraft_table
      context: dev or pre or pro
      author: axel.sanchezsalom
      comment: "Add aircraft table to database"
      changes:
        - createTable:
            tableName: aircrafts
            remarks: The aircrafts table
            columns:
              - column:
                  name: id
                  type: int
                  remarks: id of the aircraft
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: aircrafts_id_pk
              - column:
                  name: operator_id
                  type: int
                  remarks: Operator id
                  constraints:
                    nullable: false
                    # ToDo: pendiente endidad
                    #foreignKeyName: aircraft_operator_fk
                    #references: operators(id)
                    #validateForeignKey: true
              - column:
                  name: aircraft_type_id
                  type: int
                  remarks: Aircraft Type id
                  constraints:
                    nullable: false
                    # ToDo: pendiente endidad
                    #foreignKeyName: aircraft_aircraft_type_fk
                    #references: aircraft_type(id)
                    #validateForeignKey: true
              - column:
                  name: plate_number
                  type: varchar(20)
                  remarks: Plate number of the aircraft
              - column:
                  name: production_year
                  type: int
                  remarks: Year of production of the aircraft
              - column:
                  name: quantity
                  type: int
                  remarks: Quantity of aircrafts
              - column:
                  name: insurance_end_date
                  type: date
                  remarks: Insurance end date
              - column:
                  name: ambulance
                  type: bool
                  remarks: Ambulance availability
              - column:
                  name: daytime_configuration
                  type: int
                  remarks: Total number of seats for daytime travels
              - column:
                  name: nighttime_configuration
                  type: int
                  remarks: Total number of seats/beds for nighttime travels
              - column:
                  name: notes
                  type: varchar(255)
                  remarks: Notes
              - column:
                  name: inside_upgrade_date
                  type: date
                  remarks: Date of last inside improvement
              - column:
                  name: outside_upgrade_date
                  type: date
                  remarks: Date of last outside improvement
              - column:
                  name: created_at
                  type: timestamp
                  remarks: creation timestamp
                  constraints:
                    nullable: false
              - column:
                  name: created_by
                  type: varchar(30)
                  remarks: creation author
                  constraints:
                    nullable: false
              - column:
                  name: modified_at
                  type: timestamp
                  remarks: last modification timestamp
                  constraints:
                    nullable: true
              - column:
                  name: modified_by
                  type: varchar(30)
                  remarks: last modification author
                  constraints:
                    nullable: true

        - addAutoIncrement:
            columnDataType: int
            columnName: id
            generationType: ALWAYS
            incrementBy: 1
            startWith: 1
            tableName: aircrafts

  - changeSet:
      id: 04082020_aircraft_master_v1_12082020_aircraft_table_update
      context: dev or pre or pro
      author: axel.sanchezsalom
      comment: "Updates some aircraft properties"
      changes:
        - dropColumn:
            tableName: aircrafts
            columns:
              - column:
                  name: daytime_configuration
                  type: int
                  remarks: Total number of seats for daytime travels
              - column:
                  name: inside_upgrade_date
                  type: date
                  remarks: Date of last inside improvement
              - column:
                  name: outside_upgrade_date
                  type: date
                  remarks: Date of last outside improvement
        - addColumn:
            tableName: aircrafts
            columns:
              - column:
                  name: seating_f
                  type: int
                  remarks: Number of seats of type F
              - column:
                  name: seating_c
                  type: int
                  remarks: Number of seats of type C
              - column:
                  name: seating_y
                  type: int
                  remarks: Number of seats of type Y
              - column:
                  name: inside_upgrade_year
                  type: int
                  remarks: Year of last inside improvement
              - column:
                  name: outside_upgrade_year
                  type: int
                  remarks: Year of last outside improvement

  - changeSet:
      id: 04082020_aircraft_master_v1_20200820_aircraft_observation_table
      context: dev or pre or pro
      author: axel.sanchezsalom
      comment: "Add aircraft observation table to database"
      changes:
        - createTable:
            tableName: aircraft_observations
            remarks: The aircrafts observations table
            columns:
              - column:
                  name: id
                  type: int
                  remarks: id of the aircraft observation
                  constraints:
                    nullable: false
                    primaryKey: true
                    primaryKeyName: aircraft_observations_id_pk
              - column:
                  name: aircraft_id
                  type: int
                  remarks: aircraft id
                  constraints:
                    nullable: false
                    foreignKeyName: aircraft_observation_aircraft_fk
                    references: aircrafts(id)
              - column:
                  name: observation
                  type: varchar(255)
                  remarks: observation text
                  constraints:
                    nullable: false
              - column:
                  name: created_at
                  type: timestamp
                  remarks: creation timestamp
                  constraints:
                    nullable: false
              - column:
                  name: created_by
                  type: varchar(30)
                  remarks: creation author
                  constraints:
                    nullable: false
              - column:
                  name: modified_at
                  type: timestamp
                  remarks: last modification timestamp
                  constraints:
                    nullable: true
              - column:
                  name: modified_by
                  type: varchar(30)
                  remarks: last modification author
                  constraints:
                    nullable: true
        - addAutoIncrement:
            columnDataType: int
            columnName: id
            generationType: ALWAYS
            incrementBy: 1
            startWith: 1
            tableName: aircraft_observations


